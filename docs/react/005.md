# React基础事件绑定

on+事件名称={事件处理程序}



箭头函数可以传递实参



## useState

向组件添加一个状态变量

const [count,setCount]=useState(0)

useState是一个函数，返回值是一个数组

数组中第一个参数是状态变量，第二个参数是set函数用来修改状态变量。

useState的参数将作为count的初始值。



## 状态不可变

在React中，状态被认为是只读的，我们应该始终替换它，而不是修改它，直接修改状态不能引发视图更新。

## 修改对象状态

规则：对于对象类型的状态变量，应该始终传给set方法一个全新的对象来修改。

## 受控表单绑定

使用useState控制表单状态

```
const [value ,setValue]=useState('')

<input
	type="text"
	value={value}
	onChange={(e)=>setValue(e.target.value)}
/>
```

## 组件传递

父传子通过props传递。

使用Context机制跨层级组件通信。

1.使用createContext方法创建一个上下文对象Ctx

2.在顶层组件App中通过Ctx.Provider组件提供数据

3.在底层组件B中通过useContext钩子函数获取消费数据

## useEffect

在react组件中创建不是由事件引起，而是由渲染引起的操作。组件渲染完毕要和服务器要数据。

```
useEffect(()=>{})
//函数内放要执行的操作
//数组，空数组时，函数只会在组件渲染完毕之后执行一次
```

## useEffect清除副作用

```
useEffect(()=>{
//实现副作用操作逻辑
  return ()=>{
//清除副作用
  }
},[])
```

一般用于组件卸载时自动执行

## 自定义Hook函数

自定义Hook函数是以use打头的函数，通过自定义Hook函数可以实现逻辑的封装和复用。

1、声明以use打头的函数。

2、在函数体内封装可复用的逻辑。

3、把组件中用到的状态或者回调return出去。

4、在哪个组件中要用到这个逻辑，就执行这个函数，解构出来状态和回调进行使用。