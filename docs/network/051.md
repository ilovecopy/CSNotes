# 5.1 传输层提供的服务

设计传输层的目的是弥补通信子网服务的不足，提高传输服务的可靠性和保证服务质量 (QOS)

::: tip 可靠传输协议中的“可靠”是指？

使用确认机制来确保传输的数据不丢失。

:::

网络层提供主机之间的通信，传输层提供进程间的通信。

传输层是只有主机才有的层次

作用：向高层用户屏蔽通信子网的细节（如网络拓扑、路由协议等）

## 5.1.1 传输层的功能

1.提供进程之间的逻辑通信

2.复用和分用

3.对收到的报文进行差错检测

4.提供 TCP 和 UDP

分用的定义：接收方的传输层剥去报文首部后，能把这些数据正确交付到目的进程。

UDP 实现分用时所依据的头部字段是目的端口号。

![复用分用](https://csnotes.oss-cn-beijing.aliyuncs.com/photos/%E5%A4%8D%E7%94%A8%E5%88%86%E7%94%A8.png)

## 5.1.2 传输层的寻址与端口

### 2.端口号

#### 服务器端使用的端口号

（1）熟知端口号

0～1023

| 应用程序   | FTP     | TELNET    | SMTP      | DNS       | TFTP | HTTP        | SNMP |
| ---------- | ------- | --------- | --------- | --------- | ---- | ----------- | ---- |
| 熟知端口号 | 21 发现 | 23 谈恋爱 | 25 删好友 | 53 打电话 | 69   | 80 还想再见 | 161  |

（2）登记端口号

1024～49151

#### 客户端使用的端口号

数值为 49152～65535.由于这类端口号仅在客户进程运行时才动态地选择，因此又称短暂端口号。通信结束后，刚用过的客户端口号就不复存在，这个端口号就可供其他客户进程以后使用。

端口号只有本地意义，端口号只标识本计算机应用层中各个进程，且同一台计算机的 TCP 和 UDP 分别有自己的端口号，它们互不干扰。

### 3.套接字

IP 地址标识和区分不同主机

端口号标识和区分一台主机中不同进程

套接字=（IP 地址：端口号）标识一台主机上的一个进程


