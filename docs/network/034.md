# 3.4 流量控制与可靠传输机制

## 3.4.1 流量控制、可靠传输与滑动窗口机制

滑动窗口就是在发送一个包后，不等 ACK 号返回，而是直接发送后续一系列包，这样一来，等待 ACK 的这段时间就被利用起来了。

### 3.可靠传输机制

确认
重传

信道利用率=发送时间/总时间=（L/C）/T

发送窗口大小<=窗口总数 -1

## 3.4.2 停止 - 等待协议

发送窗口大小=1，接收窗口大小=1

相当于两个人在传球，只有接到球了才能传出去。

## 3.4.3 后退 N 帧协议

累计确认，按序接收

发送窗口大小>1，接收窗口大小=1

某一帧确认表示之前的帧都正确收到

发送窗口大小$1\leqslant W_{T}\leqslant 2^{n}-1$ ，因为要区分新帧和旧帧。


::: tip

因为如果把球全部传出去，一个都没收到，然后又传球，接球的人就不知道你传的球是第一次传的还是第二次传的。

![](https://csnotes.oss-cn-beijing.aliyuncs.com/photos/%E5%90%8E%E9%80%80N%E5%B8%A7.drawio.png)

:::

相当于一个人一直在给另一个人传球，接球只按照序号顺序接球，收到的是累积确认，传给你 6 号球说明前 6 个球都收到了。

## 3.4.4 选择重传协议

发送窗口大小>1，接收窗口大小>1

一定：$W_{T}+W_{R}\leqslant 2^{n}$

一般而言：$W_{Tmax}=W_{Rmax}=2^{n-1}$

相对后退 N 帧的优点：来者不拒。

相当于一个人一直在给另一个人传球，如果 3 号球没收到，接球的人收到 4、5、6 号都自己存起来，直到收到 3 号球才全部传回去。


