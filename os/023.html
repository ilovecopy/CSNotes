<!doctype html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <meta name="generator" content="VuePress 2.0.0-rc.23" />
    <style>
      :root {
        --vp-c-bg: #fff;
      }

      [data-theme='dark'] {
        --vp-c-bg: #1b1b1f;
      }

      html,
      body {
        background-color: var(--vp-c-bg);
      }
    </style>
    <script>
      const useChoice = localStorage.getItem('vuepress-color-scheme')
      const systemStatus =
        'matchMedia' in window
          ? window.matchMedia('(prefers-color-scheme: dark)').matches
          : false

      if (useChoice === 'light') {
        document.documentElement.dataset.theme = 'light'
      } else if (useChoice === 'dark' || systemStatus) {
        document.documentElement.dataset.theme = 'dark'
      }
    </script>
    <title>2.3 同步与互斥 | CSNotes</title><meta name="description" content="计算机学习笔记">
    <link rel="preload" href="/assets/style-XSCaGtJI.css" as="style"><link rel="stylesheet" href="/assets/style-XSCaGtJI.css">
    <link rel="modulepreload" href="/assets/app-DKkA6jZv.js"><link rel="modulepreload" href="/assets/023.html-CKGkuPVM.js">
    <link rel="prefetch" href="/assets/index.html-CKireTwL.js" as="script"><link rel="prefetch" href="/assets/001.html-CLsSLR5n.js" as="script"><link rel="prefetch" href="/assets/003.html-CnRatYe7.js" as="script"><link rel="prefetch" href="/assets/011.html-C_1tN8cU.js" as="script"><link rel="prefetch" href="/assets/012.html-6hJ61b8v.js" as="script"><link rel="prefetch" href="/assets/021.html-CueGX3Rm.js" as="script"><link rel="prefetch" href="/assets/022.html-BmIS1J5Y.js" as="script"><link rel="prefetch" href="/assets/023.html-CWCcrRXS.js" as="script"><link rel="prefetch" href="/assets/031.html-DogBPhTZ.js" as="script"><link rel="prefetch" href="/assets/032.html-nPPiMT7W.js" as="script"><link rel="prefetch" href="/assets/033.html-C6JrBxi-.js" as="script"><link rel="prefetch" href="/assets/034.html-D1XLuvVw.js" as="script"><link rel="prefetch" href="/assets/035.html-uZtExscY.js" as="script"><link rel="prefetch" href="/assets/036.html-BWm3qWfW.js" as="script"><link rel="prefetch" href="/assets/041.html-DsXBKXtR.js" as="script"><link rel="prefetch" href="/assets/042.html-3473tYCy.js" as="script"><link rel="prefetch" href="/assets/043.html-BasVSyTe.js" as="script"><link rel="prefetch" href="/assets/044.html-BU2iCLbh.js" as="script"><link rel="prefetch" href="/assets/051.html-BtfdL0Rm.js" as="script"><link rel="prefetch" href="/assets/052.html-D4X1bMgM.js" as="script"><link rel="prefetch" href="/assets/053.html-DJUYCrrD.js" as="script"><link rel="prefetch" href="/assets/054.html-BYvh3Ns7.js" as="script"><link rel="prefetch" href="/assets/055.html-BKtV0-WT.js" as="script"><link rel="prefetch" href="/assets/056.html-C5UQbW9R.js" as="script"><link rel="prefetch" href="/assets/057.html-BAJ4CJls.js" as="script"><link rel="prefetch" href="/assets/061.html-asAbvEJP.js" as="script"><link rel="prefetch" href="/assets/062.html-Do0A_YLP.js" as="script"><link rel="prefetch" href="/assets/071.html-gN24uMAn.js" as="script"><link rel="prefetch" href="/assets/072.html-DUxC94uw.js" as="script"><link rel="prefetch" href="/assets/073.html-66xlPbLy.js" as="script"><link rel="prefetch" href="/assets/081.html-C7QspoEv.js" as="script"><link rel="prefetch" href="/assets/001.html-eGP3uF1h.js" as="script"><link rel="prefetch" href="/assets/011.html-Cc7-XzC8.js" as="script"><link rel="prefetch" href="/assets/021.html-Dsy0FsAL.js" as="script"><link rel="prefetch" href="/assets/022.html-DPMfZg1K.js" as="script"><link rel="prefetch" href="/assets/023.html-By42eM2p.js" as="script"><link rel="prefetch" href="/assets/031.html-D0R-37oh.js" as="script"><link rel="prefetch" href="/assets/032.html-BoDVaZ9o.js" as="script"><link rel="prefetch" href="/assets/033.html-DIgTFnVG.js" as="script"><link rel="prefetch" href="/assets/034.html-Bzc22Ybp.js" as="script"><link rel="prefetch" href="/assets/041.html-58rfqVRo.js" as="script"><link rel="prefetch" href="/assets/042.html-Bo04IEEc.js" as="script"><link rel="prefetch" href="/assets/051.html-D9XGl7TD.js" as="script"><link rel="prefetch" href="/assets/052.html-BKzDDDaN.js" as="script"><link rel="prefetch" href="/assets/053.html-DV1ZuhDZ.js" as="script"><link rel="prefetch" href="/assets/054.html-Qv4Ug8XJ.js" as="script"><link rel="prefetch" href="/assets/055.html-vAb98ANe.js" as="script"><link rel="prefetch" href="/assets/061.html-DKT9ktAM.js" as="script"><link rel="prefetch" href="/assets/062.html-rn4fA-vl.js" as="script"><link rel="prefetch" href="/assets/063.html-naAZj1Qi.js" as="script"><link rel="prefetch" href="/assets/064.html-D8PiCHEK.js" as="script"><link rel="prefetch" href="/assets/071.html-CaDaduKJ.js" as="script"><link rel="prefetch" href="/assets/072.html-BRkVAsSE.js" as="script"><link rel="prefetch" href="/assets/073.html-BUd-uUYT.js" as="script"><link rel="prefetch" href="/assets/074.html-Bg0TPFdX.js" as="script"><link rel="prefetch" href="/assets/075.html-BdJjuF2x.js" as="script"><link rel="prefetch" href="/assets/081.html-DeWsFRr5.js" as="script"><link rel="prefetch" href="/assets/082.html-CWGgrJc2.js" as="script"><link rel="prefetch" href="/assets/083.html-Dj_6pcGP.js" as="script"><link rel="prefetch" href="/assets/084.html-BIyjS_rj.js" as="script"><link rel="prefetch" href="/assets/085.html-DjQKmzwe.js" as="script"><link rel="prefetch" href="/assets/086.html-D0zTrO7Z.js" as="script"><link rel="prefetch" href="/assets/091.html-GtvpSDfS.js" as="script"><link rel="prefetch" href="/assets/101.html-C7tZ6gT0.js" as="script"><link rel="prefetch" href="/assets/121.html-Bp0-4UKY.js" as="script"><link rel="prefetch" href="/assets/001.html-bQl4WIiK.js" as="script"><link rel="prefetch" href="/assets/001.html-kXVg_4gd.js" as="script"><link rel="prefetch" href="/assets/002.html-N6HZB2RU.js" as="script"><link rel="prefetch" href="/assets/003.html-DDw2-Qb-.js" as="script"><link rel="prefetch" href="/assets/004.html-DyvGIrv6.js" as="script"><link rel="prefetch" href="/assets/005.html-VJYkaYcv.js" as="script"><link rel="prefetch" href="/assets/006.html-3KhZ0os3.js" as="script"><link rel="prefetch" href="/assets/007.html-DusTv8Bc.js" as="script"><link rel="prefetch" href="/assets/008.html-BUV7K4mQ.js" as="script"><link rel="prefetch" href="/assets/009.html-CIzxELsG.js" as="script"><link rel="prefetch" href="/assets/010.html-BLVYyEBM.js" as="script"><link rel="prefetch" href="/assets/011.html-BA5eb2pN.js" as="script"><link rel="prefetch" href="/assets/0111.html-CR6Yh_7_.js" as="script"><link rel="prefetch" href="/assets/012.html-BqIYyHm_.js" as="script"><link rel="prefetch" href="/assets/013.html-DaoWuEpF.js" as="script"><link rel="prefetch" href="/assets/014.html-BO8m9rle.js" as="script"><link rel="prefetch" href="/assets/015.html-0DLcj_KA.js" as="script"><link rel="prefetch" href="/assets/016.html-D79mNMzp.js" as="script"><link rel="prefetch" href="/assets/017.html-C-4mmc3V.js" as="script"><link rel="prefetch" href="/assets/018.html-B-nurODP.js" as="script"><link rel="prefetch" href="/assets/019.html-B9tXP4kZ.js" as="script"><link rel="prefetch" href="/assets/021.html-B5p9d9zT.js" as="script"><link rel="prefetch" href="/assets/022.html-6ZQxiLef.js" as="script"><link rel="prefetch" href="/assets/041.html-DUEMg0lA.js" as="script"><link rel="prefetch" href="/assets/061.html-Z1_-_3YL.js" as="script"><link rel="prefetch" href="/assets/062.html-u4_ifTHc.js" as="script"><link rel="prefetch" href="/assets/063.html-w8BhgB9g.js" as="script"><link rel="prefetch" href="/assets/011.html-F5JVueAE.js" as="script"><link rel="prefetch" href="/assets/012.html-o0wBkRnf.js" as="script"><link rel="prefetch" href="/assets/013.html-DuTp1tUi.js" as="script"><link rel="prefetch" href="/assets/014.html-DiH1zWEk.js" as="script"><link rel="prefetch" href="/assets/015.html-BF_jn8XK.js" as="script"><link rel="prefetch" href="/assets/016.html-B1ZOIKJx.js" as="script"><link rel="prefetch" href="/assets/017.html-CWToj7RG.js" as="script"><link rel="prefetch" href="/assets/021.html-Dt5OZce5.js" as="script"><link rel="prefetch" href="/assets/022.html-C3fl5OZf.js" as="script"><link rel="prefetch" href="/assets/023.html-BF_Umj-o.js" as="script"><link rel="prefetch" href="/assets/024.html-CodEDX_g.js" as="script"><link rel="prefetch" href="/assets/025.html-c1scbDPo.js" as="script"><link rel="prefetch" href="/assets/031.html-Zi1P_amG.js" as="script"><link rel="prefetch" href="/assets/032.html-CzYL6ut_.js" as="script"><link rel="prefetch" href="/assets/033.html-Cy9ofmZe.js" as="script"><link rel="prefetch" href="/assets/041.html-Dvzzy6-3.js" as="script"><link rel="prefetch" href="/assets/051.html-gXQzRCUo.js" as="script"><link rel="prefetch" href="/assets/052.html-DXX2Ld1A.js" as="script"><link rel="prefetch" href="/assets/053.html-_MwjyTvp.js" as="script"><link rel="prefetch" href="/assets/054.html-z3UD35Om.js" as="script"><link rel="prefetch" href="/assets/061.html-B1uqNW-4.js" as="script"><link rel="prefetch" href="/assets/071.html-MHW3QPX4.js" as="script"><link rel="prefetch" href="/assets/081.html-B6t9WOis.js" as="script"><link rel="prefetch" href="/assets/082.html-BW066SXz.js" as="script"><link rel="prefetch" href="/assets/091.html-AQs13uXz.js" as="script"><link rel="prefetch" href="/assets/101.html-CTPVwrFz.js" as="script"><link rel="prefetch" href="/assets/102.html-CaCycDXZ.js" as="script"><link rel="prefetch" href="/assets/000.html-OVd0yf9i.js" as="script"><link rel="prefetch" href="/assets/001.html-BgyIwnD3.js" as="script"><link rel="prefetch" href="/assets/003.html-keSRrV42.js" as="script"><link rel="prefetch" href="/assets/009.html-ZYn7rT96.js" as="script"><link rel="prefetch" href="/assets/014.html-BdlE4feS.js" as="script"><link rel="prefetch" href="/assets/026.html-BE-G1uMA.js" as="script"><link rel="prefetch" href="/assets/027.html-DW7vLcHA.js" as="script"><link rel="prefetch" href="/assets/088.html-HbpO66Dz.js" as="script"><link rel="prefetch" href="/assets/136.html-DqnISdeQ.js" as="script"><link rel="prefetch" href="/assets/011.html-BM7Dp8HH.js" as="script"><link rel="prefetch" href="/assets/012.html-C8HN6J6o.js" as="script"><link rel="prefetch" href="/assets/021.html-XDpMNqai.js" as="script"><link rel="prefetch" href="/assets/022.html-NFtci39K.js" as="script"><link rel="prefetch" href="/assets/023.html-W-BOHLw5.js" as="script"><link rel="prefetch" href="/assets/031.html-C05QDtfy.js" as="script"><link rel="prefetch" href="/assets/032.html-D_cROnOY.js" as="script"><link rel="prefetch" href="/assets/033.html-C3GKuwyv.js" as="script"><link rel="prefetch" href="/assets/034.html-D0FnhAs7.js" as="script"><link rel="prefetch" href="/assets/035.html-DrWZ9KdX.js" as="script"><link rel="prefetch" href="/assets/036.html-nfQvL_2o.js" as="script"><link rel="prefetch" href="/assets/037.html-CJ6IH13n.js" as="script"><link rel="prefetch" href="/assets/038.html-Ce8jckVi.js" as="script"><link rel="prefetch" href="/assets/041.html-DsHIPoDr.js" as="script"><link rel="prefetch" href="/assets/042.html-vo3lv3XQ.js" as="script"><link rel="prefetch" href="/assets/043.html-DU5QGoL8.js" as="script"><link rel="prefetch" href="/assets/044.html-rw9wpMsg.js" as="script"><link rel="prefetch" href="/assets/045.html-t3hSDqLQ.js" as="script"><link rel="prefetch" href="/assets/046.html-BoTIREnI.js" as="script"><link rel="prefetch" href="/assets/047.html-CsHE-RAd.js" as="script"><link rel="prefetch" href="/assets/048.html-BmGBX9cf.js" as="script"><link rel="prefetch" href="/assets/051.html-FDFC564j.js" as="script"><link rel="prefetch" href="/assets/052.html-BtZpqiwE.js" as="script"><link rel="prefetch" href="/assets/053.html-RguzOe8E.js" as="script"><link rel="prefetch" href="/assets/054.html-Cf6qne-A.js" as="script"><link rel="prefetch" href="/assets/061.html-DaHj6FOO.js" as="script"><link rel="prefetch" href="/assets/062.html-D2AaPWxF.js" as="script"><link rel="prefetch" href="/assets/063.html-DtLf87qe.js" as="script"><link rel="prefetch" href="/assets/064.html-B1Ft8Em7.js" as="script"><link rel="prefetch" href="/assets/065.html-DlgEEjNQ.js" as="script"><link rel="prefetch" href="/assets/071.html-DdifAAzJ.js" as="script"><link rel="prefetch" href="/assets/072.html-CJb_bxYx.js" as="script"><link rel="prefetch" href="/assets/073.html-BdwfmAn8.js" as="script"><link rel="prefetch" href="/assets/074.html-CUb383vF.js" as="script"><link rel="prefetch" href="/assets/075.html-BTJv9T-L.js" as="script"><link rel="prefetch" href="/assets/011.html-BJ6hJfgz.js" as="script"><link rel="prefetch" href="/assets/012.html-CiULAB90.js" as="script"><link rel="prefetch" href="/assets/013.html-BZ3y3S8n.js" as="script"><link rel="prefetch" href="/assets/014.html-Bsh3hyuc.js" as="script"><link rel="prefetch" href="/assets/015.html-DbsWrsNC.js" as="script"><link rel="prefetch" href="/assets/021.html-BOPY0oGU.js" as="script"><link rel="prefetch" href="/assets/022.html-GaBAYKD_.js" as="script"><link rel="prefetch" href="/assets/024.html-BBDjVudr.js" as="script"><link rel="prefetch" href="/assets/031.html-CYrDzUVZ.js" as="script"><link rel="prefetch" href="/assets/032.html-Bau1c-1X.js" as="script"><link rel="prefetch" href="/assets/041.html-C0zFPBVR.js" as="script"><link rel="prefetch" href="/assets/042.html-Bov8DYtg.js" as="script"><link rel="prefetch" href="/assets/043.html-9m1f2PyP.js" as="script"><link rel="prefetch" href="/assets/051.html-cOweeqLc.js" as="script"><link rel="prefetch" href="/assets/052.html-D6ytGFPP.js" as="script"><link rel="prefetch" href="/assets/053.html-D2mlaa6J.js" as="script"><link rel="prefetch" href="/assets/061.html-DIcYQEEQ.js" as="script"><link rel="prefetch" href="/assets/001.html-CeROr0bn.js" as="script"><link rel="prefetch" href="/assets/002.html-AJYVokw5.js" as="script"><link rel="prefetch" href="/assets/003.html-D94_6TYn.js" as="script"><link rel="prefetch" href="/assets/001.html-DLP9oNZm.js" as="script"><link rel="prefetch" href="/assets/002.html-DrbIcm7_.js" as="script"><link rel="prefetch" href="/assets/003.html-CE0Sis_i.js" as="script"><link rel="prefetch" href="/assets/004.html-DwNbINF5.js" as="script"><link rel="prefetch" href="/assets/005.html-BAJW8ZVh.js" as="script"><link rel="prefetch" href="/assets/011.html-CtyyxLMf.js" as="script"><link rel="prefetch" href="/assets/001.html-BYCyXxlJ.js" as="script"><link rel="prefetch" href="/assets/0011.html-DHxUQO1U.js" as="script"><link rel="prefetch" href="/assets/002.html-BTkB5mcQ.js" as="script"><link rel="prefetch" href="/assets/003.html-CaETiwn4.js" as="script"><link rel="prefetch" href="/assets/004.html-CSN_zyHd.js" as="script"><link rel="prefetch" href="/assets/005.html-5x4UB6dZ.js" as="script"><link rel="prefetch" href="/assets/006.html-BVLVncUU.js" as="script"><link rel="prefetch" href="/assets/007.html-C8VtMvr0.js" as="script"><link rel="prefetch" href="/assets/008.html-BiDK2g8Y.js" as="script"><link rel="prefetch" href="/assets/009.html-bXcoS9Ny.js" as="script"><link rel="prefetch" href="/assets/011.html-DKYXntjR.js" as="script"><link rel="prefetch" href="/assets/012.html-BsQa8Z3K.js" as="script"><link rel="prefetch" href="/assets/013.html-DF9HSGTv.js" as="script"><link rel="prefetch" href="/assets/014.html-Cxc0skXf.js" as="script"><link rel="prefetch" href="/assets/021.html-kVZEGx5-.js" as="script"><link rel="prefetch" href="/assets/022.html-CKTv0qLZ.js" as="script"><link rel="prefetch" href="/assets/023.html-C2bDO5CQ.js" as="script"><link rel="prefetch" href="/assets/031.html-fbbQwixj.js" as="script"><link rel="prefetch" href="/assets/032.html-CjNzRt7h.js" as="script"><link rel="prefetch" href="/assets/041.html-DB8fFtTS.js" as="script"><link rel="prefetch" href="/assets/011.html-CAFxFtxy.js" as="script"><link rel="prefetch" href="/assets/012.html-Bapc3dj0.js" as="script"><link rel="prefetch" href="/assets/014.html-CTBb1hDl.js" as="script"><link rel="prefetch" href="/assets/015.html-BBlAtM_J.js" as="script"><link rel="prefetch" href="/assets/017.html-DPL4NOwV.js" as="script"><link rel="prefetch" href="/assets/021.html-CaLZwXCg.js" as="script"><link rel="prefetch" href="/assets/031.html-CLhzQ7xI.js" as="script"><link rel="prefetch" href="/assets/032.html-imOAGKQi.js" as="script"><link rel="prefetch" href="/assets/041.html-BOLgdHSi.js" as="script"><link rel="prefetch" href="/assets/051.html-BDDADSY_.js" as="script"><link rel="prefetch" href="/assets/061.html-BORlnlhw.js" as="script"><link rel="prefetch" href="/assets/062.html-w_7ixo2s.js" as="script"><link rel="prefetch" href="/assets/063.html-MFovuNeW.js" as="script"><link rel="prefetch" href="/assets/001.html-ED9H9seU.js" as="script"><link rel="prefetch" href="/assets/000.html-Cf2MIRHk.js" as="script"><link rel="prefetch" href="/assets/001.html-CwvJIV9C.js" as="script"><link rel="prefetch" href="/assets/002.html-DaN9DyqS.js" as="script"><link rel="prefetch" href="/assets/001.html-geiLfHad.js" as="script"><link rel="prefetch" href="/assets/404.html-Dkby6CaK.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-C0egI-Bl.js" as="script"><link rel="prefetch" href="/assets/giscus-1zs_z9NH.js" as="script">
  </head>
  <body>
    <div id="app"><!--[--><div class="vp-theme-container external-link-icon" vp-container><!--[--><header class="vp-navbar" vp-navbar><div class="vp-toggle-sidebar-button" title="toggle sidebar" aria-expanded="false" role="button" tabindex="0"><div class="icon" aria-hidden="true"><span></span><span></span><span></span></div></div><span><a class="route-link" href="/"><img class="vp-site-logo" src="/images/logo.png" alt="CSNotes"><span class="vp-site-name vp-hide-mobile" aria-hidden="true">CSNotes</span></a></span><div class="vp-navbar-items-wrapper" style=""><!--[--><!--]--><nav class="vp-navbar-items vp-hide-mobile" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/todo/001.html" aria-label="TODO"><!--[--><!--[--><!--]--><!--]-->TODO<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/leetcode/001.html" aria-label="LeetCode"><!--[--><!--[--><!--]--><!--]-->LeetCode<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/datastructure/011.html" aria-label="数据结构"><!--[--><!--[--><!--]--><!--]-->数据结构<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/computerOrganization/011.html" aria-label="计算机组成原理"><!--[--><!--[--><!--]--><!--]-->计算机组成原理<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/os/011.html" aria-label="操作系统"><!--[--><!--[--><!--]--><!--]-->操作系统<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/network/011.html" aria-label="计算机网络"><!--[--><!--[--><!--]--><!--]-->计算机网络<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/database/011.html" aria-label="数据库"><!--[--><!--[--><!--]--><!--]-->数据库<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/java/001.html" aria-label="Java"><!--[--><!--[--><!--]--><!--]-->Java<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ssm/001.html" aria-label="SSM"><!--[--><!--[--><!--]--><!--]-->SSM<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/react/001.html" aria-label="React"><!--[--><!--[--><!--]--><!--]-->React<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/others/001.html" aria-label="实用工具"><!--[--><!--[--><!--]--><!--]-->实用工具<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/ilovecopy/CSNotes" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><button type="button" class="vp-toggle-color-mode-button" title="toggle color mode"><svg class="light-icon" viewbox="0 0 32 32" style=""><path d="M16 12.005a4 4 0 1 1-4 4a4.005 4.005 0 0 1 4-4m0-2a6 6 0 1 0 6 6a6 6 0 0 0-6-6z" fill="currentColor"></path><path d="M5.394 6.813l1.414-1.415l3.506 3.506L8.9 10.318z" fill="currentColor"></path><path d="M2 15.005h5v2H2z" fill="currentColor"></path><path d="M5.394 25.197L8.9 21.691l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 25.005h2v5h-2z" fill="currentColor"></path><path d="M21.687 23.106l1.414-1.415l3.506 3.506l-1.414 1.414z" fill="currentColor"></path><path d="M25 15.005h5v2h-5z" fill="currentColor"></path><path d="M21.687 8.904l3.506-3.506l1.414 1.415l-3.506 3.505z" fill="currentColor"></path><path d="M15 2.005h2v5h-2z" fill="currentColor"></path></svg><svg class="dark-icon" viewbox="0 0 32 32" style="display:none;"><path d="M13.502 5.414a15.075 15.075 0 0 0 11.594 18.194a11.113 11.113 0 0 1-7.975 3.39c-.138 0-.278.005-.418 0a11.094 11.094 0 0 1-3.2-21.584M14.98 3a1.002 1.002 0 0 0-.175.016a13.096 13.096 0 0 0 1.825 25.981c.164.006.328 0 .49 0a13.072 13.072 0 0 0 10.703-5.555a1.01 1.01 0 0 0-.783-1.565A13.08 13.08 0 0 1 15.89 4.38A1.015 1.015 0 0 0 14.98 3z" fill="currentColor"></path></svg></button><form class="search-box" role="search"><input type="search" placeholder="搜索" autocomplete="off" spellcheck="false" value><!----></form></div></header><!--]--><div class="vp-sidebar-mask"></div><!--[--><aside class="vp-sidebar" vp-sidebar><nav class="vp-navbar-items" aria-label="site navigation"><!--[--><div class="vp-navbar-item"><a class="route-link auto-link" href="/todo/001.html" aria-label="TODO"><!--[--><!--[--><!--]--><!--]-->TODO<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/leetcode/001.html" aria-label="LeetCode"><!--[--><!--[--><!--]--><!--]-->LeetCode<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/datastructure/011.html" aria-label="数据结构"><!--[--><!--[--><!--]--><!--]-->数据结构<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/computerOrganization/011.html" aria-label="计算机组成原理"><!--[--><!--[--><!--]--><!--]-->计算机组成原理<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/os/011.html" aria-label="操作系统"><!--[--><!--[--><!--]--><!--]-->操作系统<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/network/011.html" aria-label="计算机网络"><!--[--><!--[--><!--]--><!--]-->计算机网络<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/database/011.html" aria-label="数据库"><!--[--><!--[--><!--]--><!--]-->数据库<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/java/001.html" aria-label="Java"><!--[--><!--[--><!--]--><!--]-->Java<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/ssm/001.html" aria-label="SSM"><!--[--><!--[--><!--]--><!--]-->SSM<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/react/001.html" aria-label="React"><!--[--><!--[--><!--]--><!--]-->React<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="route-link auto-link" href="/others/001.html" aria-label="实用工具"><!--[--><!--[--><!--]--><!--]-->实用工具<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-navbar-item"><a class="auto-link external-link" href="https://github.com/ilovecopy/CSNotes" aria-label="GitHub" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><!--]--><!--]-->GitHub<!--[--><!--[--><!--]--><!--]--></a></div><!--]--></nav><!--[--><!--]--><ul class="vp-sidebar-items"><!--[--><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">第一章 计算机系统概述 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/os/011.html" aria-label="1.1 操作系统的基本概念"><!--[--><!--[--><!--]--><!--]-->1.1 操作系统的基本概念<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/012.html" aria-label="1.2  操作系统的发展历程"><!--[--><!--[--><!--]--><!--]-->1.2  操作系统的发展历程<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/013.html" aria-label="1.3  操作系统运行环境"><!--[--><!--[--><!--]--><!--]-->1.3  操作系统运行环境<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/014.html" aria-label="1.4 操作系统结构"><!--[--><!--[--><!--]--><!--]-->1.4 操作系统结构<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading active collapsible">第二章 进程与线程 <span class="down arrow"></span></p><ul style="" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/os/021.html" aria-label="2.1 进程与线程"><!--[--><!--[--><!--]--><!--]-->2.1 进程与线程<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/022.html" aria-label="2.2 处理机调度"><!--[--><!--[--><!--]--><!--]-->2.2 处理机调度<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link route-link-active auto-link vp-sidebar-item active" href="/os/023.html" aria-label="2.3 同步与互斥"><!--[--><!--[--><!--]--><!--]-->2.3 同步与互斥<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/024.html" aria-label="2.4 死锁"><!--[--><!--[--><!--]--><!--]-->2.4 死锁<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">第三章 内存管理 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/os/031.html" aria-label="3.1 内存管理概念"><!--[--><!--[--><!--]--><!--]-->3.1 内存管理概念<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/032.html" aria-label="3.2 虚拟内存管理"><!--[--><!--[--><!--]--><!--]-->3.2 虚拟内存管理<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">第四章 文件管理 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/os/041.html" aria-label="4.1 文件系统基础"><!--[--><!--[--><!--]--><!--]-->4.1 文件系统基础<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/042.html" aria-label="4.2 文件目录"><!--[--><!--[--><!--]--><!--]-->4.2 文件目录<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/043.html" aria-label="4.3 文件系统"><!--[--><!--[--><!--]--><!--]-->4.3 文件系统<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><li><p tabindex="0" class="vp-sidebar-item vp-sidebar-heading collapsible">第五章 输入/输出（I/O）管理 <span class="right arrow"></span></p><ul style="display:none;" class="vp-sidebar-children"><!--[--><li><a class="route-link auto-link vp-sidebar-item" href="/os/051.html" aria-label="5.1 I/O 管理概述"><!--[--><!--[--><!--]--><!--]-->5.1 I/O 管理概述<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/052.html" aria-label="5.2 设备独立性软件"><!--[--><!--[--><!--]--><!--]-->5.2 设备独立性软件<!--[--><!--[--><!--]--><!--]--></a><!----></li><li><a class="route-link auto-link vp-sidebar-item" href="/os/053.html" aria-label="5.3 磁盘和固态硬盘"><!--[--><!--[--><!--]--><!--]-->5.3 磁盘和固态硬盘<!--[--><!--[--><!--]--><!--]--></a><!----></li><!--]--></ul></li><!--]--></ul><!--[--><!--]--></aside><!--]--><!--[--><main class="vp-page"><!--[--><!--]--><div vp-content><!--[--><!--]--><div id="content"><h1 id="_2-3-同步与互斥" tabindex="-1"><a class="header-anchor" href="#_2-3-同步与互斥"><span>2.3 同步与互斥</span></a></h1><h2 id="_2-3-1-同步与互斥的概念" tabindex="-1"><a class="header-anchor" href="#_2-3-1-同步与互斥的概念"><span>2.3.1 同步与互斥的概念</span></a></h2><h3 id="_1-临界资源" tabindex="-1"><a class="header-anchor" href="#_1-临界资源"><span>1.临界资源</span></a></h3><p>一次只允许一个进程使用的资源称为临界资源</p><h3 id="_2-同步" tabindex="-1"><a class="header-anchor" href="#_2-同步"><span>2.同步</span></a></h3><p>为完成某种人//如果 S.L 该资源不够，该进程进入阻塞队列某些地方上协调它们的工作次序而等待、传递信息所产生的制约关系。</p><h3 id="_3-互斥" tabindex="-1"><a class="header-anchor" href="#_3-互斥"><span>3.互斥</span></a></h3><p>互斥也称间接制约关系</p><p>（1）空闲让进</p><p>（2）忙则等待</p><p>（3）有限等待</p><p>（4）让权等待//不一定实现</p><p>P 操作即 wait 操作，表示等待某种资源直到可用，若这种资源暂时不可用，则进程进入阻塞态，执行 P 操作时的进程处于运行态。</p><h2 id="_2-3-2-实现临界区互斥的基本方法" tabindex="-1"><a class="header-anchor" href="#_2-3-2-实现临界区互斥的基本方法"><span>2.3.2 实现临界区互斥的基本方法</span></a></h2><h3 id="_1-软件实现方法" tabindex="-1"><a class="header-anchor" href="#_1-软件实现方法"><span>1.软件实现方法</span></a></h3><p>算法一：单标志法</p><p>别人允许你上厕所，你才能上。</p><p>缺点：两个进程必须轮流进入临界区，如果一个进程不再进入临界区，则另一个进程也无法进入临界区，违背“空闲让进”。</p><figure><img src="https://csnotes.oss-cn-beijing.aliyuncs.com/photos/单标志法.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>算法二：双标志先检查法</p><p>如果所有人都不用厕所，则自己进去上锁。</p><p>缺点：可能两个人同时进入厕所</p><figure><img src="https://csnotes.oss-cn-beijing.aliyuncs.com/photos/双标志法先检查.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>算法三：双标志法后检查</p><figure><img src="https://csnotes.oss-cn-beijing.aliyuncs.com/photos/双标志法后检查.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><p>算法四：Peterson 算法</p><p>缺点：未确定让权等待</p><figure><img src="https://csnotes.oss-cn-beijing.aliyuncs.com/photos/Peterson.png" alt="" tabindex="0" loading="lazy"><figcaption></figcaption></figure><h3 id="_2-硬件实现方法" tabindex="-1"><a class="header-anchor" href="#_2-硬件实现方法"><span>2.硬件实现方法</span></a></h3><p>（1）中断屏蔽方法</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">关中断；</span>
<span class="line">临界区；</span>
<span class="line">开中断；</span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>（2）硬件指令方法</p><p>TestAndSet 指令</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">boolean <span class="token function">TestAndSet</span><span class="token punctuation">(</span>boolean <span class="token operator">*</span>lock<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    boolean old<span class="token punctuation">;</span></span>
<span class="line">    old <span class="token operator">=</span> <span class="token operator">*</span>lock<span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">*</span>lock <span class="token operator">=</span> <span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">return</span> old<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">while</span> <span class="token function">TestAndSet</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//读出 lock 后把 lock 设置为 true</span></span>
<span class="line">进程的临界区代码段<span class="token punctuation">;</span></span>
<span class="line">lock<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">进程的其他代码<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>Swap 指令</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token function">Swap</span><span class="token punctuation">(</span>boolean <span class="token operator">*</span>a<span class="token punctuation">,</span>boolean <span class="token operator">*</span>b<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    boolean temp<span class="token punctuation">;</span></span>
<span class="line">    Temp<span class="token operator">=</span><span class="token operator">*</span>a<span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">*</span>a<span class="token operator">=</span><span class="token operator">*</span>b<span class="token punctuation">;</span></span>
<span class="line">    <span class="token operator">*</span>b<span class="token operator">=</span>temp<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">key<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">while</span><span class="token punctuation">(</span>key<span class="token operator">!=</span><span class="token boolean">false</span><span class="token punctuation">)</span><span class="token comment">//如果 key 为 true</span></span>
<span class="line">    <span class="token function">Swap</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>lock<span class="token punctuation">,</span><span class="token operator">&amp;</span>key<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//检查时都上锁，直到 key 为 false，说明不上锁</span></span>
<span class="line">进程的临界区代码段<span class="token punctuation">;</span></span>
<span class="line">lock<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span></span>
<span class="line">进程的其他代码<span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h2 id="_2-3-3-互斥锁" tabindex="-1"><a class="header-anchor" href="#_2-3-3-互斥锁"><span>2.3.3 互斥锁</span></a></h2><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token function">acquire</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span><span class="token punctuation">(</span><span class="token operator">!</span>available<span class="token punctuation">)</span></span>
<span class="line">        <span class="token punctuation">;</span> <span class="token comment">//忙等待</span></span>
<span class="line">    available<span class="token operator">=</span><span class="token boolean">false</span><span class="token punctuation">;</span> <span class="token comment">//获得锁</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">release</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    available<span class="token operator">=</span><span class="token boolean">true</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>缺点：忙等待，进程时间片用完才下处理机。</p><p>需要连续循环忙等待的互斥锁，都可称为自旋锁。</p><h2 id="_2-3-4-信号量" tabindex="-1"><a class="header-anchor" href="#_2-3-4-信号量"><span>2.3.4 信号量</span></a></h2><table><thead><tr><th>信号量</th><th>互斥量</th><th>资源量</th></tr></thead><tbody><tr><td></td><td>1 表示临界区只允许一个进程进入</td><td>可用资源</td></tr><tr><td></td><td>0 表示临界区进入了一个进程，无等待</td><td>无可用资源</td></tr><tr><td></td><td>&lt;0 表示临界区有一个进程，有绝对值等待</td><td>&lt;0 表示资源用完，有绝对值等待</td></tr></tbody></table><h3 id="_1-整型信号量" tabindex="-1"><a class="header-anchor" href="#_1-整型信号量"><span>1.整型信号量</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token function">wait</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span><span class="token punctuation">(</span>S<span class="token operator">&lt;=</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    S<span class="token operator">=</span>S<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">signal</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    S<span class="token operator">=</span>S<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>缺点：未遵循让权等待。</p><h3 id="_2-记录型信号量" tabindex="-1"><a class="header-anchor" href="#_2-记录型信号量"><span>2.记录型信号量</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">typedef</span> <span class="token keyword">struct</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">int</span> value<span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">struct</span> <span class="token class-name">process</span> <span class="token operator">*</span>L<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span> semaphore<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">wait</span><span class="token punctuation">(</span>semaphore S<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    S<span class="token punctuation">.</span>value<span class="token operator">--</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">//如果 S.L 该资源不够，该进程进入阻塞队列</span></span>
<span class="line">        add <span class="token keyword">this</span> process to S<span class="token punctuation">.</span>L<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">block</span><span class="token punctuation">(</span>S<span class="token punctuation">.</span>L<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token keyword">void</span> <span class="token function">signal</span><span class="token punctuation">(</span>semaphore<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    S<span class="token punctuation">.</span>value<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>S<span class="token punctuation">.</span>value <span class="token operator">&lt;</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span> <span class="token comment">//如果 S.L 中还有等待该资源的进程被阻塞，唤醒一个进程</span></span>
<span class="line">        remove a process P from S<span class="token punctuation">.</span>L<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">wakeup</span><span class="token punctuation">(</span>P<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h3 id="_3-利用信号量实现同步" tabindex="-1"><a class="header-anchor" href="#_3-利用信号量实现同步"><span>3.利用信号量实现同步</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">semaphore S <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    x<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">V</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">P</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    y<span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h3 id="_4-利用信号量实现进程互斥" tabindex="-1"><a class="header-anchor" href="#_4-利用信号量实现进程互斥"><span>4.利用信号量实现进程互斥</span></a></h3><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">semophore S <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">P</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    进程P1的临界区<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">V</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">P</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    进程P2的临界区<span class="token punctuation">;</span></span>
<span class="line">    <span class="token function">V</span><span class="token punctuation">(</span>S<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h2 id="_2-3-5-管程" tabindex="-1"><a class="header-anchor" href="#_2-3-5-管程"><span>2.3.5 管程</span></a></h2><h2 id="_2-3-6-经典同步问题" tabindex="-1"><a class="header-anchor" href="#_2-3-6-经典同步问题"><span>2.3.6 经典同步问题</span></a></h2><h3 id="_1-生产者-消费者问题" tabindex="-1"><a class="header-anchor" href="#_1-生产者-消费者问题"><span>1.生产者 - 消费者问题</span></a></h3><p>问题描述：一组生产者进程和一组消费者进程共享一个初始化为空、大小为 n 的缓冲区，只有缓冲区没满时，生产者才能把消息放入缓冲区，否则必须等待；只有缓冲区不空时，消费者才能从中取出消息，否则必须等待。由于缓冲区时临界资源，它只允许一个生产者放入消息，或一个消费者从中取出消息。</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">semophore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//临界区互斥信号量</span></span>
<span class="line">semophore empty <span class="token operator">=</span> n<span class="token punctuation">;</span> <span class="token comment">//空闲缓冲区</span></span>
<span class="line">semophore full <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>  <span class="token comment">//缓冲区初始化为空</span></span>
<span class="line"><span class="token function">producer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        produce an item in nextp<span class="token punctuation">;</span> <span class="token comment">//生产数据</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">//获取空缓冲区单元</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">//进入临界区</span></span>
<span class="line">        add nextp to buffer<span class="token punctuation">;</span>      <span class="token comment">//将数据放入缓冲区</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                 <span class="token comment">//离开缓冲区</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">//满缓冲区 +1</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">consumer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>full<span class="token punctuation">)</span><span class="token punctuation">;</span>                    <span class="token comment">//获取满缓冲区单元</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//进入临界区</span></span>
<span class="line">        remove an item from buffer<span class="token punctuation">;</span> <span class="token comment">//从缓冲区中取出数据</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//离开缓冲区</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>empty<span class="token punctuation">)</span><span class="token punctuation">;</span>                   <span class="token comment">//空缓冲区 +1</span></span>
<span class="line">        consume the item<span class="token punctuation">;</span>           <span class="token comment">//消费数据</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><p>同步的 P 操作一定要放在互斥的 P 操作前。</p><h3 id="_2-多生产者-多消费者问题" tabindex="-1"><a class="header-anchor" href="#_2-多生产者-多消费者问题"><span>2.多生产者 - 多消费者问题</span></a></h3><p>问题描述：桌子上有一个盘子，每次只能向其中放入一个水果。爸爸专向盘子中放苹果，妈妈专向盘子中放橘子，儿子专吃橘子，女儿专吃苹果。只有盘子为空时，爸爸或妈妈才可向盘子中放一个水果。只有当盘子中有自己需要的水果时，儿子或女儿才能拿出来。</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">semophare plate <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">,</span> apple <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">,</span> orange <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token function">dad</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        prepare an apple<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>plate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        put the apple on the plate<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>apple<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">mom</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        prepare an orange<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>plate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        put the orange on the plate<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>orange<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">son</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>orange<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        take an orange from the plate<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>plate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        eat the orange<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">daughter</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>apple<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        take an apple from the plate<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>plate<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        eat the apple<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h3 id="_3-读者-写者问题" tabindex="-1"><a class="header-anchor" href="#_3-读者-写者问题"><span>3.读者 - 写者问题</span></a></h3><p>问题描述：有读者和写者两组并发进程，共享一个文件，当两个或以上的读进程同时访问共享数据时不会产生副作用，但若某个写进程和其他进程同时访问共享数据时则可能导致数据不一致的错误。因此要求：1.允许多个读者可以同时对文件执行读操作。2.只允许一个写着往文件中写信息。3.任一写者在完成写操作之前不允许其他读者或写者工作。4.写者执行写操作之前，应让已有的读者和写者全部退出。</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> count <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>       <span class="token comment">//记录当前读者数量</span></span>
<span class="line">semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//用于保护更新 count 变量时的互斥</span></span>
<span class="line">semaphore rw <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span>    <span class="token comment">//用于保证读者和写者互斥地访问文件</span></span>
<span class="line">semaphore w<span class="token operator">=</span><span class="token number">1</span><span class="token punctuation">;</span><span class="token comment">//用于实现“写优先”</span></span>
<span class="line"><span class="token function">writer</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//在无写进程请求时进入</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//互斥访问共享文件</span></span>
<span class="line">        writing<span class="token punctuation">;</span> <span class="token comment">//写入</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">//释放共享文件</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>w<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//恢复对共享文件的访问</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token function">reader</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//互斥访问 count 变量</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>count <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">P</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span></span>
<span class="line">        count<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//释放互斥变量 count</span></span>
<span class="line">        reading<span class="token punctuation">;</span>  <span class="token comment">//读取</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//互斥访问 count 变量</span></span>
<span class="line">        count<span class="token operator">--</span><span class="token punctuation">;</span><span class="token comment">//读写计数器减 1</span></span>
<span class="line">        <span class="token keyword">if</span><span class="token punctuation">(</span>count<span class="token operator">==</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token comment">//当最后一个读进程读完共享文件</span></span>
<span class="line">            <span class="token function">V</span><span class="token punctuation">(</span>rw<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//允许写进程写</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//释放互斥变量 count</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h3 id="_4-哲学家进餐问题" tabindex="-1"><a class="header-anchor" href="#_4-哲学家进餐问题"><span>4.哲学家进餐问题</span></a></h3><p>问题描述：一张圆桌边上坐着 5 名哲学家，没两名哲学家之间的桌上摆一根筷子，两根筷子中间时一碗米饭，哲学家们只思考和吃饭。哲学家思考时不影响他人。只有当哲学家饥饿时，才试图拿起左、右两根筷子（一根一根地拿起）。若筷子已在他人手上，则需要等待。饥饿的哲学家只有同时拿到了两根筷子才可以开始进餐。进餐完毕后，放下筷子进行思考。</p><p>解决方法：同时取左右两边筷子</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line">semaphore chopstick<span class="token punctuation">[</span><span class="token number">5</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">semaphore mutex <span class="token operator">=</span> <span class="token number">1</span><span class="token punctuation">;</span> <span class="token comment">//设置取筷子的信号量</span></span>
<span class="line"><span class="token function">Pi</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">do</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">//在取筷子前获得互斥量</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>chopstick<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//取左边筷子</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>chopstick<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//取右边筷子</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>mutex<span class="token punctuation">)</span><span class="token punctuation">;</span>                  <span class="token comment">//释放筷子的信号量</span></span>
<span class="line">        eat<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>chopstick<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>           <span class="token comment">//放回左边筷子</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>chopstick<span class="token punctuation">[</span><span class="token punctuation">(</span>i <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">%</span> <span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//放回右边筷子</span></span>
<span class="line">        think<span class="token punctuation">;</span>                     <span class="token comment">//思考</span></span>
<span class="line">    <span class="token punctuation">}</span> <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div><h3 id="_5-吸烟者问题" tabindex="-1"><a class="header-anchor" href="#_5-吸烟者问题"><span>5.吸烟者问题</span></a></h3><p>问题描述：假设一个系统有三个抽烟者进程和一个供应者进程。每个抽烟者不停地卷烟并抽掉它，但要卷起并抽掉一只烟，抽烟者需要有三种材料：烟草、纸和胶水。三个抽烟者中，第一个拥有烟草，第二个拥有纸，第三个拥有胶水。供应者每次提供两种材料，一个抽烟者抽掉，并告诉供应者已完成，此时供应者就会放另外两种材料在桌子上。</p><div class="language-cpp line-numbers-mode" data-highlighter="prismjs" data-ext="cpp"><pre><code class="language-cpp"><span class="line"><span class="token keyword">int</span> num <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span>          <span class="token comment">//存储随机数</span></span>
<span class="line">semaphore offer1 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//定义信号量对应烟草和纸组合的资源</span></span>
<span class="line">semaphore offer2 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//定义信号量对应烟草和胶水组合的资源</span></span>
<span class="line">semaphore offer3 <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//定义信号量对应纸和胶水组合的资源</span></span>
<span class="line">semaphore finish <span class="token operator">=</span> <span class="token number">0</span><span class="token punctuation">;</span> <span class="token comment">//定义信号量表示抽烟是否完成</span></span>
<span class="line">process <span class="token function">P1</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        num<span class="token operator">++</span><span class="token punctuation">;</span></span>
<span class="line">        num <span class="token operator">=</span> num <span class="token operator">%</span> <span class="token number">3</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">0</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">V</span><span class="token punctuation">(</span>offer1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>num <span class="token operator">==</span> <span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">            <span class="token function">V</span><span class="token punctuation">(</span>offer2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        <span class="token keyword">else</span></span>
<span class="line">            <span class="token function">V</span><span class="token punctuation">(</span>offer3<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        任一两种材料放在桌子上<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">process <span class="token function">P2</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>offer3<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        拿纸和胶水，卷成烟，抽掉<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">process <span class="token function">P3</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>offer2<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        拿烟草和胶水，卷成烟，抽掉<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">process <span class="token function">P4</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">while</span> <span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span></span>
<span class="line">    <span class="token punctuation">{</span></span>
<span class="line">        <span class="token function">P</span><span class="token punctuation">(</span>offer1<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">        拿纸和烟草，卷成烟，抽掉<span class="token punctuation">;</span></span>
<span class="line">        <span class="token function">V</span><span class="token punctuation">(</span>finish<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"></div></div></div><!--[--><!--]--></div><footer class="vp-page-meta"><div class="vp-meta-item edit-link"><a class="auto-link external-link label" href="https://github.com/ilovecopy/CSNotes/edit/main/docs/os/023.md" aria-label="编辑此页" rel="noopener noreferrer" target="_blank"><!--[--><!--[--><svg class="edit-icon" viewbox="0 0 1024 1024"><g fill="currentColor"><path d="M430.818 653.65a60.46 60.46 0 0 1-50.96-93.281l71.69-114.012 7.773-10.365L816.038 80.138A60.46 60.46 0 0 1 859.225 62a60.46 60.46 0 0 1 43.186 18.138l43.186 43.186a60.46 60.46 0 0 1 0 86.373L588.879 565.55l-8.637 8.637-117.466 68.234a60.46 60.46 0 0 1-31.958 11.229z"></path><path d="M728.802 962H252.891A190.883 190.883 0 0 1 62.008 771.98V296.934a190.883 190.883 0 0 1 190.883-192.61h267.754a60.46 60.46 0 0 1 0 120.92H252.891a69.962 69.962 0 0 0-69.098 69.099V771.98a69.962 69.962 0 0 0 69.098 69.098h475.911A69.962 69.962 0 0 0 797.9 771.98V503.363a60.46 60.46 0 1 1 120.922 0V771.98A190.883 190.883 0 0 1 728.802 962z"></path></g></svg><!--]--><!--]-->编辑此页<!--[--><!--[--><!--]--><!--]--></a></div><div class="vp-meta-item git-info"><div class="vp-meta-item last-updated"><span class="meta-item-label">上次更新: </span><time class="meta-item-info" datetime="2024-07-04T14:37:39.000Z" data-allow-mismatch>2024/7/4 22:37</time></div><!----></div></footer><nav class="vp-page-nav" aria-label="page navigation"><a class="route-link auto-link prev" href="/os/022.html" aria-label="2.2 处理机调度"><!--[--><div class="hint"><span class="arrow left"></span> Prev</div><div class="link"><span class="external-link">2.2 处理机调度</span></div><!--]--></a><a class="route-link auto-link next" href="/os/024.html" aria-label="2.4 死锁"><!--[--><div class="hint">Next <span class="arrow right"></span></div><div class="link"><span class="external-link">2.4 死锁</span></div><!--]--></a></nav><!--[--><!--[--><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;"><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--]--><!--]--></main><!--]--></div><!--[--><!----><!--]--><!--]--></div>
    <script type="module" src="/assets/app-DKkA6jZv.js" defer></script>
  </body>
</html>
